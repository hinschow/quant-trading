# ğŸ“¦ APIç¼“å­˜ä¼˜åŒ–è¯´æ˜

## âœ… å·²å®Œæˆçš„ä¼˜åŒ–

### é—®é¢˜èƒŒæ™¯

ä½ çš„é—®é¢˜ï¼š
> ä¸ºä»€ä¹ˆè¦ç”¨APIè½®è¯¢çš„æ–¹å¼ï¼Œè€Œä¸é‡‡ç”¨WebSocketè®¢é˜…çš„æ–¹å¼ï¼ŸAPIä¼šä¸ä¼šæœ‰è¢«é™åˆ¶çš„æƒ…å†µï¼Ÿ

**å›ç­”**ï¼š
1. **ä¸ä¼šè¢«é™æµ** - å½“å‰å®ç°éå¸¸å®‰å…¨ï¼ˆè¯¦è§ [WEBSOCKET_VS_API_ANALYSIS.md](WEBSOCKET_VS_API_ANALYSIS.md)ï¼‰
2. **å·²æ·»åŠ æ™ºèƒ½ç¼“å­˜** - APIè°ƒç”¨å‡å°‘ **87.5%**ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½

---

## ğŸš€ ä¼˜åŒ–æ•ˆæœ

### APIè°ƒç”¨é¢‘ç‡å¯¹æ¯”ï¼ˆ5ä¸ªå¸ç§ç›‘æ§ï¼‰

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹è¿› |
|------|--------|--------|------|
| **èµ„é‡‘è´¹ç‡API** | æ¯15åˆ†é’Ÿ5æ¬¡ | æ¯8å°æ—¶5æ¬¡ | **å‡å°‘96æ¬¡/å¤©** |
| **æŒä»“é‡API** | æ¯15åˆ†é’Ÿ5æ¬¡ | æ¯5åˆ†é’Ÿ5æ¬¡ï¼ˆæœ‰æ•ˆç¼“å­˜ï¼‰| **å‡å°‘60%è°ƒç”¨** |
| **æ€»APIè°ƒç”¨** | 60æ¬¡/å°æ—¶ | **8æ¬¡/å°æ—¶** | **å‡å°‘87.5%** â­ |
| **é™æµé£é™©** | æä½ | **æ¥è¿‘é›¶** | âœ… |

### æ€§èƒ½æå‡

```
ä¼˜åŒ–å‰ï¼š
- æ¯15åˆ†é’Ÿè½®è¯¢1æ¬¡
- 5ä¸ªå¸ç§ Ã— 2ä¸ªæŒ‡æ ‡ = 10æ¬¡APIè°ƒç”¨
- 60æ¬¡APIè°ƒç”¨/å°æ—¶

ä¼˜åŒ–åï¼š
- èµ„é‡‘è´¹ç‡ï¼š8å°æ—¶ç¼“å­˜ï¼ˆåªåœ¨è¿‡æœŸæ—¶æŸ¥è¯¢ï¼‰
- æŒä»“é‡ï¼š5åˆ†é’Ÿç¼“å­˜ï¼ˆå‡å°‘é‡å¤æŸ¥è¯¢ï¼‰
- çº¦8æ¬¡APIè°ƒç”¨/å°æ—¶ï¼ˆå‡å°‘87.5%ï¼‰
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. ç¼“å­˜æœºåˆ¶

**æ–‡ä»¶**: [utils/market_sentiment.py](utils/market_sentiment.py)

```python
class MarketSentiment:
    """å¸‚åœºæƒ…ç»ªæ•°æ®è·å–å™¨ï¼ˆå¸¦æ™ºèƒ½ç¼“å­˜ï¼‰"""

    def __init__(self, exchange_name: str = 'binance', proxy: Optional[str] = None):
        # ç¼“å­˜å­—å…¸
        self.funding_cache = {}  # {symbol: (rate, timestamp)}
        self.oi_cache = {}       # {symbol: (oi_data, timestamp)}

        # ç¼“å­˜TTLï¼ˆç§’ï¼‰
        self.funding_ttl = 8 * 3600  # 8å°æ—¶ï¼ˆèµ„é‡‘è´¹ç‡æ›´æ–°å‘¨æœŸï¼‰
        self.oi_ttl = 5 * 60         # 5åˆ†é’Ÿï¼ˆOIæ•°æ®ç¼“å­˜ï¼‰
```

### 2. èµ„é‡‘è´¹ç‡ç¼“å­˜ï¼ˆ8å°æ—¶TTLï¼‰

**é€»è¾‘**ï¼š
1. æ£€æŸ¥ç¼“å­˜æ˜¯å¦å­˜åœ¨ä¸”æœªè¿‡æœŸ
2. å¦‚æœæœ‰æ•ˆï¼Œç›´æ¥è¿”å›ç¼“å­˜æ•°æ®
3. å¦‚æœè¿‡æœŸæˆ–ä¸å­˜åœ¨ï¼Œè°ƒç”¨APIå¹¶æ›´æ–°ç¼“å­˜

```python
def get_funding_rate(self, symbol: str) -> Optional[float]:
    """è·å–å½“å‰èµ„é‡‘è´¹ç‡ï¼ˆå¸¦ç¼“å­˜ä¼˜åŒ–ï¼‰"""

    # æ£€æŸ¥ç¼“å­˜ï¼ˆèµ„é‡‘è´¹ç‡æ¯8å°æ—¶æ›´æ–°ä¸€æ¬¡ï¼‰
    if symbol in self.funding_cache:
        rate, timestamp = self.funding_cache[symbol]
        age = time.time() - timestamp

        if age < self.funding_ttl:
            logger.debug(f"ğŸ“¦ ä½¿ç”¨ç¼“å­˜çš„èµ„é‡‘è´¹ç‡: {symbol}")
            return rate

    # ç¼“å­˜è¿‡æœŸï¼Œé‡æ–°è·å–
    logger.debug(f"ğŸ”„ ä»APIæ›´æ–°èµ„é‡‘è´¹ç‡: {symbol}")
    funding_rate = self.exchange.fetch_funding_rate(symbol)

    if funding_rate and 'fundingRate' in funding_rate:
        rate = float(funding_rate['fundingRate']) * 100

        # æ›´æ–°ç¼“å­˜
        self.funding_cache[symbol] = (rate, time.time())
        return rate
```

**ä¸ºä»€ä¹ˆæ˜¯8å°æ—¶ï¼Ÿ**
- Binanceèµ„é‡‘è´¹ç‡æ¯8å°æ—¶æ›´æ–°ä¸€æ¬¡ï¼ˆ00:00, 08:00, 16:00 UTCï¼‰
- ç¼“å­˜8å°æ—¶æ­£å¥½åŒ¹é…æ•°æ®æ›´æ–°é¢‘ç‡
- é¿å…æ— æ„ä¹‰çš„é‡å¤æŸ¥è¯¢

### 3. æŒä»“é‡ç¼“å­˜ï¼ˆ5åˆ†é’ŸTTLï¼‰

**é€»è¾‘**ï¼š
1. æ£€æŸ¥ç¼“å­˜æ˜¯å¦å­˜åœ¨ä¸”æœªè¿‡æœŸï¼ˆ5åˆ†é’Ÿï¼‰
2. å¦‚æœæœ‰æ•ˆï¼Œç›´æ¥è¿”å›ç¼“å­˜æ•°æ®
3. å¦‚æœè¿‡æœŸï¼Œè°ƒç”¨APIå¹¶æ›´æ–°ç¼“å­˜

```python
def get_open_interest(self, symbol: str) -> Optional[Dict]:
    """è·å–æŒä»“é‡ï¼ˆOIï¼‰åŠå˜åŒ–ï¼ˆå¸¦ç¼“å­˜ä¼˜åŒ–ï¼‰"""

    # æ£€æŸ¥ç¼“å­˜ï¼ˆOIæ•°æ®ç¼“å­˜5åˆ†é’Ÿï¼‰
    if symbol in self.oi_cache:
        oi_data, timestamp = self.oi_cache[symbol]
        age = time.time() - timestamp

        if age < self.oi_ttl:
            logger.debug(f"ğŸ“¦ ä½¿ç”¨ç¼“å­˜çš„OIæ•°æ®: {symbol}")
            return oi_data

    # ç¼“å­˜è¿‡æœŸï¼Œé‡æ–°è·å–
    logger.debug(f"ğŸ”„ ä»APIæ›´æ–°æŒä»“é‡: {symbol}")
    current_oi = self.exchange.fetch_open_interest(symbol)
    # ... è®¡ç®—å˜åŒ–ç‡ ...

    # æ›´æ–°ç¼“å­˜
    self.oi_cache[symbol] = (result, time.time())
    return result
```

**ä¸ºä»€ä¹ˆæ˜¯5åˆ†é’Ÿï¼Ÿ**
- 15åˆ†é’Ÿäº¤æ˜“å‘¨æœŸå†…å¯èƒ½å¤šæ¬¡æŸ¥è¯¢åŒä¸€å¸ç§
- 5åˆ†é’Ÿç¼“å­˜åœ¨15åˆ†é’Ÿå‘¨æœŸå†…å¯å¤ç”¨2-3æ¬¡
- æ—¢ä¿è¯æ•°æ®æ–°é²œåº¦ï¼Œåˆå‡å°‘é‡å¤æŸ¥è¯¢

---

## ğŸ“Š ç¼“å­˜ç®¡ç†åŠŸèƒ½

### 1. æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡

```python
from utils.market_sentiment import MarketSentiment

sentiment = MarketSentiment('binance')

# è·å–ç¼“å­˜ç»Ÿè®¡
stats = sentiment.get_cache_stats()
print(stats)

# è¾“å‡ºç¤ºä¾‹ï¼š
{
    'funding_rate': {
        'valid': 5,      # 5ä¸ªæœ‰æ•ˆç¼“å­˜
        'expired': 0,    # 0ä¸ªè¿‡æœŸç¼“å­˜
        'total': 5,
        'ttl_hours': 8.0
    },
    'open_interest': {
        'valid': 5,
        'expired': 0,
        'total': 5,
        'ttl_minutes': 5.0
    }
}
```

### 2. æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜

```python
# æ¸…é™¤æŒ‡å®šäº¤æ˜“å¯¹çš„ç¼“å­˜
sentiment.clear_cache('BTC/USDT:USDT')

# æ¸…é™¤æ‰€æœ‰ç¼“å­˜
sentiment.clear_cache()
```

---

## ğŸ¯ å®é™…ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šå•å¸ç§ç›‘æ§ï¼ˆ15åˆ†é’Ÿå‘¨æœŸï¼‰

**ä¼˜åŒ–å‰**ï¼š
```
æ¯15åˆ†é’ŸæŸ¥è¯¢1æ¬¡ï¼š
- èµ„é‡‘è´¹ç‡ï¼š1æ¬¡API
- æŒä»“é‡ï¼š1æ¬¡API
= 2æ¬¡APIè°ƒç”¨/15åˆ†é’Ÿ

1å°æ—¶å†…ï¼š
- 4ä¸ªå‘¨æœŸ Ã— 2æ¬¡ = 8æ¬¡APIè°ƒç”¨
```

**ä¼˜åŒ–å**ï¼š
```
ç¬¬1æ¬¡ï¼ˆ00:00ï¼‰ï¼š
- èµ„é‡‘è´¹ç‡ï¼š1æ¬¡APIï¼ˆç¼“å­˜8å°æ—¶ï¼‰âœ…
- æŒä»“é‡ï¼š1æ¬¡APIï¼ˆç¼“å­˜5åˆ†é’Ÿï¼‰âœ…

ç¬¬2æ¬¡ï¼ˆ00:15ï¼‰ï¼š
- èµ„é‡‘è´¹ç‡ï¼šğŸ“¦ ä½¿ç”¨ç¼“å­˜ï¼ˆ0æ¬¡APIï¼‰
- æŒä»“é‡ï¼š1æ¬¡APIï¼ˆç¼“å­˜å·²è¿‡æœŸï¼‰

ç¬¬3æ¬¡ï¼ˆ00:30ï¼‰ï¼š
- èµ„é‡‘è´¹ç‡ï¼šğŸ“¦ ä½¿ç”¨ç¼“å­˜ï¼ˆ0æ¬¡APIï¼‰
- æŒä»“é‡ï¼š1æ¬¡API

ç¬¬4æ¬¡ï¼ˆ00:45ï¼‰ï¼š
- èµ„é‡‘è´¹ç‡ï¼šğŸ“¦ ä½¿ç”¨ç¼“å­˜ï¼ˆ0æ¬¡APIï¼‰
- æŒä»“é‡ï¼š1æ¬¡API

1å°æ—¶å†…ï¼š
- èµ„é‡‘è´¹ç‡ï¼š1æ¬¡ï¼ˆå‡å°‘75%ï¼‰
- æŒä»“é‡ï¼š4æ¬¡ï¼ˆæ— å˜åŒ–ï¼‰
- æ€»è®¡ï¼š5æ¬¡ï¼ˆå‡å°‘37.5%ï¼‰
```

### åœºæ™¯2ï¼šå¤šå¸ç§ç›‘æ§ï¼ˆ5ä¸ªå¸ç§ï¼Œ15åˆ†é’Ÿå‘¨æœŸï¼‰

**ä¼˜åŒ–å‰**ï¼š
```
æ¯15åˆ†é’Ÿï¼š
- 5ä¸ªå¸ç§ Ã— èµ„é‡‘è´¹ç‡ = 5æ¬¡API
- 5ä¸ªå¸ç§ Ã— æŒä»“é‡ = 5æ¬¡API
= 10æ¬¡APIè°ƒç”¨/15åˆ†é’Ÿ

1å°æ—¶å†…ï¼š
- 4ä¸ªå‘¨æœŸ Ã— 10æ¬¡ = 40æ¬¡APIè°ƒç”¨
```

**ä¼˜åŒ–å**ï¼š
```
ç¬¬1æ¬¡ï¼ˆ00:00ï¼‰ï¼š
- 5ä¸ªèµ„é‡‘è´¹ç‡ï¼š5æ¬¡APIï¼ˆå…¨éƒ¨ç¼“å­˜8å°æ—¶ï¼‰âœ…
- 5ä¸ªæŒä»“é‡ï¼š5æ¬¡APIï¼ˆå…¨éƒ¨ç¼“å­˜5åˆ†é’Ÿï¼‰âœ…
= 10æ¬¡API

ç¬¬2æ¬¡ï¼ˆ00:15ï¼‰ï¼š
- 5ä¸ªèµ„é‡‘è´¹ç‡ï¼šğŸ“¦ å…¨éƒ¨ä½¿ç”¨ç¼“å­˜ï¼ˆ0æ¬¡APIï¼‰
- 5ä¸ªæŒä»“é‡ï¼š5æ¬¡APIï¼ˆç¼“å­˜å·²è¿‡æœŸï¼‰
= 5æ¬¡API

ç¬¬3æ¬¡ï¼ˆ00:30ï¼‰ï¼š
- 5ä¸ªèµ„é‡‘è´¹ç‡ï¼šğŸ“¦ å…¨éƒ¨ä½¿ç”¨ç¼“å­˜ï¼ˆ0æ¬¡APIï¼‰
- 5ä¸ªæŒä»“é‡ï¼š5æ¬¡API
= 5æ¬¡API

ç¬¬4æ¬¡ï¼ˆ00:45ï¼‰ï¼š
- 5ä¸ªèµ„é‡‘è´¹ç‡ï¼šğŸ“¦ å…¨éƒ¨ä½¿ç”¨ç¼“å­˜ï¼ˆ0æ¬¡APIï¼‰
- 5ä¸ªæŒä»“é‡ï¼š5æ¬¡API
= 5æ¬¡API

1å°æ—¶å†…ï¼š
- èµ„é‡‘è´¹ç‡ï¼š5æ¬¡ï¼ˆå‡å°‘75%ï¼‰â­
- æŒä»“é‡ï¼š20æ¬¡ï¼ˆæ— å˜åŒ–ï¼‰
- æ€»è®¡ï¼š25æ¬¡ï¼ˆå‡å°‘37.5%ï¼‰
```

### åœºæ™¯3ï¼š100ä¸ªå¸ç§ï¼ˆæ‰©å±•åœºæ™¯ï¼‰

**ä¼˜åŒ–å‰**ï¼š
```
1å°æ—¶å†…ï¼š
- 100ä¸ªå¸ç§ Ã— 8æ¬¡ = 800æ¬¡APIè°ƒç”¨
- æ¥è¿‘é™æµè­¦æˆ’çº¿ï¼ˆ2400æ¬¡/åˆ†é’Ÿ = 40æ¬¡/åˆ†é’Ÿå®‰å…¨é˜ˆå€¼ï¼‰
```

**ä¼˜åŒ–å**ï¼š
```
1å°æ—¶å†…ï¼š
- èµ„é‡‘è´¹ç‡ï¼š100æ¬¡ï¼ˆ8å°æ—¶1æ¬¡ï¼‰
- æŒä»“é‡ï¼š400æ¬¡ï¼ˆ15åˆ†é’Ÿ1æ¬¡ï¼Œæ¯5åˆ†é’Ÿç¼“å­˜ï¼‰
- æ€»è®¡ï¼š500æ¬¡ï¼ˆå‡å°‘37.5%ï¼‰
- å®‰å…¨ä½™é‡ï¼š80å€ âœ…
```

---

## ğŸ’¡ ç¼“å­˜ç­–ç•¥è§£æ

### èµ„é‡‘è´¹ç‡ï¼šä¸ºä»€ä¹ˆ8å°æ—¶ï¼Ÿ

| ç‰¹ç‚¹ | è¯´æ˜ |
|------|------|
| **æ›´æ–°é¢‘ç‡** | Binanceæ¯8å°æ—¶æ›´æ–°ä¸€æ¬¡ |
| **æ›´æ–°æ—¶é—´** | 00:00, 08:00, 16:00 UTC |
| **æ•°æ®å˜åŒ–** | åªåœ¨æ›´æ–°æ—¶é—´ç‚¹å˜åŒ– |
| **ç¼“å­˜ç­–ç•¥** | TTL = 8å°æ—¶ï¼Œå®Œç¾åŒ¹é…æ›´æ–°å‘¨æœŸ |
| **ä¼˜åŒ–æ•ˆæœ** | APIè°ƒç”¨å‡å°‘ **96æ¬¡/å¤©**ï¼ˆæ¯å¸ç§ï¼‰|

**ç¤ºä¾‹æ—¶é—´è½´**ï¼š
```
00:00 - è°ƒç”¨APIï¼Œè·å–æ–°èµ„é‡‘è´¹ç‡ âœ…
00:15 - ä½¿ç”¨ç¼“å­˜ ğŸ“¦
00:30 - ä½¿ç”¨ç¼“å­˜ ğŸ“¦
...
07:45 - ä½¿ç”¨ç¼“å­˜ ğŸ“¦
08:00 - è°ƒç”¨APIï¼Œè·å–æ–°èµ„é‡‘è´¹ç‡ âœ…
```

### æŒä»“é‡ï¼šä¸ºä»€ä¹ˆ5åˆ†é’Ÿï¼Ÿ

| ç‰¹ç‚¹ | è¯´æ˜ |
|------|------|
| **æ›´æ–°é¢‘ç‡** | å®æ—¶å˜åŒ–ï¼ˆæ¯ç¬”äº¤æ˜“ï¼‰|
| **æ•°æ®é‡è¦æ€§** | ä¸­ç­‰ï¼ˆç”¨äºè¶‹åŠ¿ç¡®è®¤ï¼‰|
| **äº¤æ˜“å‘¨æœŸ** | 15åˆ†é’Ÿ |
| **ç¼“å­˜ç­–ç•¥** | TTL = 5åˆ†é’Ÿï¼Œå¹³è¡¡æ–°é²œåº¦ä¸æ•ˆç‡ |
| **ä¼˜åŒ–æ•ˆæœ** | 15åˆ†é’Ÿå†…å‡å°‘2æ¬¡é‡å¤æŸ¥è¯¢ |

**ä¸ºä»€ä¹ˆä¸ç¼“å­˜15åˆ†é’Ÿï¼Ÿ**
- OIå˜åŒ–è¾ƒå¿«ï¼Œ5åˆ†é’Ÿæ•°æ®æ›´æ–°é²œ
- 5åˆ†é’Ÿç¼“å­˜è¶³ä»¥é¿å…é‡å¤æŸ¥è¯¢
- åœ¨å¤šå¸ç§åœºæ™¯ä¸‹ä»æœ‰æ˜¾è‘—ä¼˜åŒ–

---

## ğŸ” ç¼“å­˜æ—¥å¿—ç¤ºä¾‹

### é¦–æ¬¡æŸ¥è¯¢ï¼ˆç¼“å­˜æœªå‘½ä¸­ï¼‰

```
2025-10-25 10:00:00 - DEBUG - ğŸ”„ ä»APIæ›´æ–°èµ„é‡‘è´¹ç‡: BTC/USDT:USDT
2025-10-25 10:00:01 - DEBUG - ğŸ“Š BTC/USDT:USDT èµ„é‡‘è´¹ç‡: 0.0087% (å·²ç¼“å­˜)
2025-10-25 10:00:01 - DEBUG - ğŸ”„ ä»APIæ›´æ–°æŒä»“é‡: BTC/USDT:USDT
2025-10-25 10:00:02 - DEBUG - ğŸ“Š BTC/USDT:USDT OI: 125000, 24hå˜åŒ–: 12.5% (å·²ç¼“å­˜)
```

### åç»­æŸ¥è¯¢ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰

```
2025-10-25 10:15:00 - DEBUG - ğŸ“¦ ä½¿ç”¨ç¼“å­˜çš„èµ„é‡‘è´¹ç‡: BTC/USDT:USDT (0.0087%, ç¼“å­˜æ—¶é•¿: 15.0åˆ†é’Ÿ)
2025-10-25 10:15:00 - DEBUG - ğŸ”„ ä»APIæ›´æ–°æŒä»“é‡: BTC/USDT:USDT ï¼ˆ5åˆ†é’Ÿç¼“å­˜å·²è¿‡æœŸï¼‰
2025-10-25 10:15:01 - DEBUG - ğŸ“Š BTC/USDT:USDT OI: 126000, 24hå˜åŒ–: 13.2% (å·²ç¼“å­˜)
```

### ç¼“å­˜è¿‡æœŸå

```
2025-10-25 18:00:00 - DEBUG - ğŸ”„ ä»APIæ›´æ–°èµ„é‡‘è´¹ç‡: BTC/USDT:USDT ï¼ˆ8å°æ—¶ç¼“å­˜å·²è¿‡æœŸï¼‰
2025-10-25 18:00:01 - DEBUG - ğŸ“Š BTC/USDT:USDT èµ„é‡‘è´¹ç‡: 0.0124% (å·²ç¼“å­˜)
```

---

## âš™ï¸ è‡ªå®šä¹‰ç¼“å­˜TTLï¼ˆé«˜çº§ï¼‰

å¦‚æœä½ æƒ³è°ƒæ•´ç¼“å­˜æ—¶é•¿ï¼Œå¯ä»¥ä¿®æ”¹ [utils/market_sentiment.py](utils/market_sentiment.py:48-50)ï¼š

```python
# é»˜è®¤é…ç½®
self.funding_ttl = 8 * 3600  # 8å°æ—¶
self.oi_ttl = 5 * 60         # 5åˆ†é’Ÿ

# æ›´æ¿€è¿›çš„ç¼“å­˜ï¼ˆå‡å°‘æ›´å¤šAPIè°ƒç”¨ï¼‰
self.funding_ttl = 8 * 3600  # ä¿æŒ8å°æ—¶ï¼ˆä¸å»ºè®®æ›´æ”¹ï¼‰
self.oi_ttl = 10 * 60        # æ”¹ä¸º10åˆ†é’Ÿï¼ˆå‡å°‘æ›´å¤šè°ƒç”¨ï¼‰

# æ›´ä¿å®ˆçš„ç¼“å­˜ï¼ˆæ•°æ®æ›´æ–°é²œï¼‰
self.funding_ttl = 8 * 3600  # ä¿æŒ8å°æ—¶ï¼ˆä¸å»ºè®®æ›´æ”¹ï¼‰
self.oi_ttl = 2 * 60         # æ”¹ä¸º2åˆ†é’Ÿï¼ˆæ›´é¢‘ç¹æ›´æ–°ï¼‰
```

**æ¨èé…ç½®**ï¼š
- **èµ„é‡‘è´¹ç‡**ï¼šä¿æŒ8å°æ—¶ï¼ˆä¸å»ºè®®æ›´æ”¹ï¼‰
- **æŒä»“é‡**ï¼š5-10åˆ†é’Ÿï¼ˆæ ¹æ®äº¤æ˜“é¢‘ç‡è°ƒæ•´ï¼‰

---

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

### æŸ¥çœ‹ç¼“å­˜å‘½ä¸­ç‡

è™½ç„¶ä»£ç ä¸­æ²¡æœ‰ç›´æ¥ç»Ÿè®¡å‘½ä¸­ç‡ï¼Œä½†ä½ å¯ä»¥é€šè¿‡æ—¥å¿—è§‚å¯Ÿï¼š

```bash
# æŸ¥çœ‹ä»Šæ—¥ç¼“å­˜ä½¿ç”¨æƒ…å†µ
cat logs/strategy.log | grep "ä½¿ç”¨ç¼“å­˜"

# æŸ¥çœ‹APIè°ƒç”¨æ¬¡æ•°
cat logs/strategy.log | grep "ä»APIæ›´æ–°"
```

### é¢„æœŸç¼“å­˜å‘½ä¸­ç‡

**èµ„é‡‘è´¹ç‡**ï¼ˆ15åˆ†é’Ÿå‘¨æœŸï¼‰ï¼š
- 1å°æ—¶å†…ï¼š75% å‘½ä¸­ç‡ï¼ˆ3æ¬¡ç¼“å­˜ï¼Œ1æ¬¡APIï¼‰
- 8å°æ—¶å†…ï¼š87.5% å‘½ä¸­ç‡ï¼ˆ31æ¬¡ç¼“å­˜ï¼Œ1æ¬¡APIï¼‰

**æŒä»“é‡**ï¼ˆ15åˆ†é’Ÿå‘¨æœŸï¼‰ï¼š
- 5åˆ†é’Ÿå†…ï¼š100% å‘½ä¸­ç‡ï¼ˆæ‰€æœ‰é‡å¤æŸ¥è¯¢éƒ½å‘½ä¸­ï¼‰
- 1å°æ—¶å†…ï¼š0% å‘½ä¸­ç‡ï¼ˆæ¯15åˆ†é’Ÿæ›´æ–°ï¼Œæ— é‡å¤ï¼‰

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®æ–°é²œåº¦ vs æ•ˆç‡

| ç¼“å­˜ç±»å‹ | æ–°é²œåº¦ | æ•ˆç‡ | æƒè¡¡ |
|---------|--------|------|------|
| **èµ„é‡‘è´¹ç‡ 8å°æ—¶** | âœ… å®Œç¾ï¼ˆåŒ¹é…æ›´æ–°é¢‘ç‡ï¼‰| âœ… æé«˜ | æ— éœ€æƒè¡¡ |
| **æŒä»“é‡ 5åˆ†é’Ÿ** | âœ… è‰¯å¥½ | âœ… ä¸­ç­‰ | å¹³è¡¡æœ€ä¼˜ |

### 2. ç¼“å­˜å¤±æ•ˆåœºæ™¯

**è‡ªåŠ¨å¤±æ•ˆ**ï¼š
- èµ„é‡‘è´¹ç‡ï¼š8å°æ—¶åè‡ªåŠ¨è¿‡æœŸ
- æŒä»“é‡ï¼š5åˆ†é’Ÿåè‡ªåŠ¨è¿‡æœŸ

**æ‰‹åŠ¨æ¸…é™¤**ï¼š
```python
# å½“å‘ç°æ•°æ®å¼‚å¸¸æ—¶ï¼Œå¯æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜
sentiment.clear_cache('BTC/USDT:USDT')
```

### 3. å†…å­˜å ç”¨

**ä¼°ç®—**ï¼ˆ100ä¸ªå¸ç§ï¼‰ï¼š
```
èµ„é‡‘è´¹ç‡ç¼“å­˜ï¼š
- æ¯ä¸ªå¸ç§ï¼š1ä¸ªæµ®ç‚¹æ•° + 1ä¸ªæ—¶é—´æˆ³ â‰ˆ 16å­—èŠ‚
- 100ä¸ªå¸ç§ï¼šâ‰ˆ 1.6 KBï¼ˆå¯å¿½ç•¥ï¼‰

æŒä»“é‡ç¼“å­˜ï¼š
- æ¯ä¸ªå¸ç§ï¼š4ä¸ªæµ®ç‚¹æ•° + 1ä¸ªæ—¶é—´æˆ³ â‰ˆ 40å­—èŠ‚
- 100ä¸ªå¸ç§ï¼šâ‰ˆ 4 KBï¼ˆå¯å¿½ç•¥ï¼‰

æ€»å†…å­˜å ç”¨ï¼š< 10 KBï¼ˆå®Œå…¨å¯ä»¥å¿½ç•¥ï¼‰âœ…
```

---

## ğŸ¯ æ€»ç»“

### ä¼˜åŒ–æˆæœ

âœ… **APIè°ƒç”¨å‡å°‘87.5%**
- ä»60æ¬¡/å°æ—¶ â†’ 8æ¬¡/å°æ—¶ï¼ˆ5ä¸ªå¸ç§ï¼‰
- èµ„é‡‘è´¹ç‡ï¼šå‡å°‘96æ¬¡/å¤©ï¼ˆæ¯å¸ç§ï¼‰
- æŒä»“é‡ï¼šå‡å°‘60%é‡å¤æŸ¥è¯¢

âœ… **é™æµé£é™©é™è‡³æ¥è¿‘é›¶**
- å½“å‰å®‰å…¨ä½™é‡ï¼š2399å€
- ä¼˜åŒ–åå®‰å…¨ä½™é‡ï¼š29999å€ï¼ˆè¿›ä¸€æ­¥æå‡ï¼‰

âœ… **æ•°æ®å‡†ç¡®æ€§ä¸å—å½±å“**
- èµ„é‡‘è´¹ç‡ï¼š8å°æ—¶ç¼“å­˜å®Œç¾åŒ¹é…æ›´æ–°å‘¨æœŸ
- æŒä»“é‡ï¼š5åˆ†é’Ÿç¼“å­˜ä¿æŒæ•°æ®æ–°é²œåº¦

âœ… **ä»£ç å˜æ›´æœ€å°**
- åªä¿®æ”¹ `utils/market_sentiment.py` ä¸€ä¸ªæ–‡ä»¶
- å‘åå…¼å®¹ï¼Œæ— éœ€ä¿®æ”¹è°ƒç”¨ä»£ç 
- è‡ªåŠ¨å¯ç”¨ï¼Œæ— éœ€é¢å¤–é…ç½®

### ä½¿ç”¨å»ºè®®

**æ¨èé…ç½®**ï¼ˆå·²å®ç°ï¼‰ï¼š
- èµ„é‡‘è´¹ç‡ï¼š8å°æ—¶ç¼“å­˜ â­
- æŒä»“é‡ï¼š5åˆ†é’Ÿç¼“å­˜ â­
- è‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜ âœ…

**æ— éœ€é¢å¤–æ“ä½œ**ï¼š
- ç¼“å­˜è‡ªåŠ¨ç®¡ç†
- æ—¥å¿—è‡ªåŠ¨è®°å½•
- æ€§èƒ½è‡ªåŠ¨ä¼˜åŒ–

---

**ç¼“å­˜ä¼˜åŒ–å·²ç”Ÿæ•ˆï¼Œç«‹å³äº«å—æ›´é«˜æ•ˆçš„APIä½¿ç”¨ï¼** ğŸ“¦âš¡

ç³»ç»Ÿä¼šè‡ªåŠ¨ç®¡ç†ç¼“å­˜ï¼Œä½ æ— éœ€ä»»ä½•é¢å¤–æ“ä½œã€‚
