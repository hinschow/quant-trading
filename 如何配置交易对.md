# 如何配置交易对

## 快速开始

### 1. 打开配置文件

编辑 `config/strategy_params.py` 文件：

```bash
vim config/strategy_params.py
# 或
nano config/strategy_params.py
```

### 2. 找到交易对配置部分

找到这个部分（约第202行）：

```python
# ==================== 交易对配置 ====================
# 用户可自定义要交易的交易对列表
# 系统会自动尝试从Hyperliquid获取数据，如果不可用则回退到Binance
TRADING_SYMBOLS = [
    'BTC/USDT',
    'ETH/USDT',
    'SOL/USDT',
]
```

### 3. 修改交易对列表

根据你的需求修改列表：

```python
TRADING_SYMBOLS = [
    'BTC/USDT',      # 比特币
    'ETH/USDT',      # 以太坊
    'SOL/USDT',      # Solana
    'DOGE/USDT',     # 狗狗币
    'XRP/USDT',      # 瑞波币
    'ADA/USDT',      # 艾达币
    # 添加你想交易的任意交易对...
]
```

### 4. 保存并运行

保存文件后，系统会自动：
1. 优先从Hyperliquid获取数据
2. 如果Hyperliquid没有该交易对，自动切换到Binance
3. 记录每个交易对使用的数据源

---

## 支持的交易对

### Hyperliquid支持的交易对（218+）

常见的主流币种：
- BTC, ETH, SOL, BNB, XRP, ADA, DOGE, DOT, MATIC, LINK
- UNI, ATOM, LTC, AVAX, SHIB, TRX, DAI, WBTC, LEO, ETC
- 更多...

**优势**：
- 去中心化交易所数据
- 支持聪明钱包追踪
- API限制宽松

### Binance支持的交易对（200+）

作为备用数据源，Binance Futures支持200+交易对。

**优势**：
- 全球最大交易所
- 数据质量高
- 流动性好

---

## 数据源选择逻辑

```
你配置: 'XYZ/USDT'
    ↓
系统首先尝试 Hyperliquid
    ↓
    ├─ ✅ 如果找到 → 使用Hyperliquid数据
    └─ ❌ 如果没有 → 自动切换到Binance
            ↓
            ├─ ✅ 如果找到 → 使用Binance数据
            └─ ❌ 如果没有 → 跳过该交易对
```

**完全自动，你不需要做任何额外配置！**

---

## 示例配置

### 配置1：只交易主流币

```python
TRADING_SYMBOLS = [
    'BTC/USDT',
    'ETH/USDT',
    'BNB/USDT',
]
```

### 配置2：主流币 + 热门山寨币

```python
TRADING_SYMBOLS = [
    'BTC/USDT',
    'ETH/USDT',
    'SOL/USDT',
    'DOGE/USDT',
    'XRP/USDT',
    'ADA/USDT',
    'DOT/USDT',
    'MATIC/USDT',
]
```

### 配置3：大仓位配置（激进）

```python
TRADING_SYMBOLS = [
    'BTC/USDT',
    'ETH/USDT',
    'SOL/USDT',
    'BNB/USDT',
    'XRP/USDT',
    'ADA/USDT',
    'DOGE/USDT',
    'DOT/USDT',
    'MATIC/USDT',
    'LINK/USDT',
    'AVAX/USDT',
    'UNI/USDT',
    'ATOM/USDT',
    'LTC/USDT',
    'ETC/USDT',
]
```

---

## 验证配置

### 方法1：运行测试脚本

```bash
python3 test_multi_source.py
```

你会看到每个交易对使用的数据源：

```
测试 BTC/USDT:
  ✅ 数据获取成功
  📊 数据源: hyperliquid
  💰 资金费率: 0.0013%
```

### 方法2：Python代码验证

```python
from utils.hyperliquid_client import HyperliquidClient
from config.strategy_params import TRADING_SYMBOLS

client = HyperliquidClient()

print("配置的交易对及数据源：")
for symbol in TRADING_SYMBOLS:
    market_data = client.get_market_data(symbol)
    if market_data:
        print(f"✅ {symbol:12} -> {market_data['source']}")
    else:
        print(f"❌ {symbol:12} -> 无法获取数据")
```

---

## 常见问题

### Q: 我添加的交易对无法获取数据怎么办？

**A**: 检查以下几点：
1. 交易对格式是否正确（必须是 `XXX/USDT` 格式）
2. 该交易对是否在Hyperliquid和Binance都存在
3. 检查日志输出，看是否有错误信息

### Q: 如何查看某个交易对用的是哪个数据源？

**A**: 查看日志或使用测试脚本：

```python
from utils.hyperliquid_client import HyperliquidClient

client = HyperliquidClient()
market_data = client.get_market_data('BTC/USDT')
print(f"数据源: {market_data['source']}")
```

### Q: 我想只使用Hyperliquid，不用Binance，怎么办？

**A**: 在代码中初始化时禁用Binance：

```python
client = HyperliquidClient(enable_binance_fallback=False)
```

但这样的话，Hyperliquid不支持的交易对将无法获取数据。

### Q: 可以添加多少个交易对？

**A**: 理论上无限制，但建议：
- **小资金（<$5000）**: 3-5个交易对
- **中资金（$5000-$20000）**: 5-10个交易对
- **大资金（>$20000）**: 10-20个交易对

过多交易对会：
- 增加API调用次数
- 分散资金导致单笔盈利下降
- 增加监控难度

### Q: 交易对的顺序重要吗？

**A**: 不重要。系统会并行处理所有交易对，顺序不影响结果。

---

## 高级配置

### 针对不同交易对设置不同参数

在 `SYMBOL_SPECIFIC_PARAMS` 中配置：

```python
SYMBOL_SPECIFIC_PARAMS = {
    "BTC/USDT": {
        "stop_loss_pct": 0.03,        # 3% 止损
        "take_profit_pct": 0.05,      # 5% 止盈
        "min_signal_strength": 55,    # 最低信号强度
    },
    "ETH/USDT": {
        "stop_loss_pct": 0.03,
        "take_profit_pct": 0.05,
        "min_signal_strength": 60,
    },
    # 你可以为每个交易对配置不同的参数
}
```

### 动态调整交易对

如果你想在运行时动态调整交易对，可以修改代码：

```python
from config.strategy_params import TRADING_SYMBOLS

# 临时添加交易对
TRADING_SYMBOLS.append('LINK/USDT')

# 临时移除交易对
TRADING_SYMBOLS.remove('SOL/USDT')
```

---

## 总结

1. **编辑** `config/strategy_params.py`
2. **修改** `TRADING_SYMBOLS` 列表
3. **保存** 文件
4. **运行** 策略

系统会自动处理数据源选择，你只需要关心想交易哪些币种！

如有疑问，查看 [多数据源支持文档.md](多数据源支持文档.md) 获取详细信息。
